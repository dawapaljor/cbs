---
import AudioPlayer from '../widgets/AudioPlayer.astro';
import QuotePrimary from '../widgets/QuotePrimary.astro';
import SectionHeading from '../Section-Heading.astro';
const featuredImage = 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExbzdtN2h5bnNiZWE0eHR4Z2xsZHpwYmRlNTJjdnAyZmRneDl4OHI0ZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/zlPF1RO5oNmTe30TPN/giphy.gif'
const title = "Abuse"
const slug = "abuse-and-negligence"
const intro = 'Since our 2021 report, numerous cases of abuse inside China’s colonial boarding schools in Tibet have come to light—contradicting official '
import VideoJS from '../widgets/VideoJS.astro';
const videoUrls = [
  {
    title: "Lhadon Medrogongkar, Thanggya Central Bilingual Preschool",
    url: "https://s7712.pcdn.co/wp-content/uploads/2024/10/Tibetankids_1.mp4",
    image: "media/escape-from-boarding-school.png",
    id: "video1"
  },
  {
    title: "Mucun Village Kindergarten (not boarding)",
    url: "https://s7712.pcdn.co/wp-content/uploads/2024/10/BoyForcedintocar.mp4",
    image: "media/forced-into-car.png",
    id: "video2"
  },

  {
    title: "Tashi Herdsman explaining Primary, middle boarding schools",
    url: "https://s7712.pcdn.co/wp-content/uploads/2024/12/video1Principalbeatschild.mp4",
    image: "media/Principalbeatschild.png",
    id: "video4"
  },

  
];
---
<div class="w-screen mx-auto ">
  <div class="flex box flex-col items-center">
    <SectionHeading {title} {featuredImage}></SectionHeading>
 
 


     <section class="font-secondary max-w-7xl py-10 md:p-10">
      <div 
        x-data="{ open: false, currentVideo: null }" 
        class="text-gray-600 text-lg content grid  grid-cols-1 md:grid-cols-3 gap-10 w-full cursor-pointer pb-10"
      >
        {videoUrls.map(video => (
          <div 
            x-data={`{ video: ${JSON.stringify(video)} }`}
            class="rounded shadow hover:shadow-lg transition" 
            @click="open = true; currentVideo = video"
          >
            <div class="group bg-cover bg-center bg-no-repeat rounded-xl h-96 w-90 relative flex items-center justify-center overflow-hidden"
               style={`background-image:url(${video.image});`}>
            <div class="w-full h-full absolute bg-neutral-950/50 z-0 group-hover:bg-neutral-950/80  transition-all duration-300"></div>
            <img src="media/film.svg" alt="" class="w-30 z-10 group-hover:opacity-30 group-hover:scale-110 transition-all duration-300 " />
          </div>
          </div>
        ))}

        <!-- Modal -->
        <div 
          x-show="open" 
          x-transition 
          class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50"
          style="display: none;"
        >
          <div class="bg-neutral-800/0 rounded-lg overflow-hidden shadow-lg max-w-4xl w-full ">
            <button 
              class="absolute top-2 right-2 text-7xl font-bold text-white hover:text-neutral-100"
              @click="open = false; currentVideo = null"
            >&times;</button>
            <template x-if="currentVideo">
              
                <div class="w-full p-4 bg-neutral-800/0 flex-col items-center">
                  <h2 class="text-xl  mb-4 text-neutral-300" x-text="currentVideo.title"></h2>
                  <center>
                    <video 
                    x-bind:src="currentVideo.url" 
                    controls 
                    autoplay 
                    class="w-full rounded m-5"
                  ></video>
                  </center>
                </div>
              
            </template>
          </div>
        </div>
      </div>
      <AudioPlayer src="media/audio/audio2.m4a">
        <p>Regarding young monks, our monastery has a monastic school where students are taught the standard curriculum, including subjects like math and science. However, monks below the age of 12 or 13 are forced to attend district boarding schools. Tragically, two young monks from our monastery committed suicide after being forcibly taken to one of these schools.</p>
       <p>Some young monks who are currently in school continue to wear their monastic robes, it seems because of repeated appeals from parents at various levels. Although, in the past there were notices forbidding them to visit their monasteries, yet they could still visit their monasteries. But, recently, they are completely banned to visit their monastery. Even, during school vacations, the monasteries even assign tutors to teach them subjects like Tibetan grammar and Sakya Lekshey. However, this was recently declared illegal, and those involved were summoned for interrogation and detained for one or two days in [the main city].</p>
       <p>Students are also not allowed to visit monasteries, though many still do. For government officials, however, visiting a monastery is nearly impossible. Every monastery is under strict surveillance by a Monastic Management Committee, and there are CCTV cameras installed in every corner. The monitoring is constant and very strict.</p>  
     </AudioPlayer>
    </section>
 
    
 </div>
 </div>



<script>
import { fade } from "astro:transitions";
import { gsap } from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger);




  const slug = box.querySelector('h1')?.id;
  if (slug) {
    const targetElement = document.querySelector(`#${slug}`);
    const heading = box.querySelector('h1');
    // Initial state
    gsap.set(heading, { opacity: 1 });
    // Scroll animation
    gsap.to(heading, {
      opacity: 0.2,
      scrollTrigger: {
        trigger: box,
        start: "top center",
        end: "bottom center",
        scrub: true,
        markers: false,
        pinSpacing:false,
        anticipatePin: 1,
      }
    });

    gsap.to(box, {
      duration: 1,
      scrollTrigger: {
        trigger: box,
        start: "100px 100px",
        end: "50% 10%",
        pin: targetElement,
        markers: true,
        pinSpacing:false,
        anticipatePin: 1,

      }
    });
  }

let banners = gsap.utils.toArray(".banner");

banners.forEach((banner) => {
  let heading = banner.querySelector("h1");
  if (heading) {
    gsap.fromTo(
      heading,
      { opacity: 1,
        scale: .5,

       },
      {
        opacity: 0,
        scale: 2,
        scrollTrigger: {
          trigger: banner,
          start: "top center",
          end: "bottom center",
          scrub: true,
          pin: heading,
          // markers: true, // Uncomment for debugging
        },
      }
    );
  }
});
</script>
